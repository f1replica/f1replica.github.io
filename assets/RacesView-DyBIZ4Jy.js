import{d as S,i as f,s as y,r as m,w as C,_ as h,c as d,a as _,b as R,e as g,F as v,f as w,o as p}from"./index-BFvED5sS.js";import{u as E,S as V}from"./SeasonComp-DUORSe7J.js";import{g as $}from"./data-BQr7bUVa.js";import{R as k}from"./RaceCard-D_KtxJds.js";import"./SeasonHeading-XcPeZ7j-.js";import"./QCard-CrxttMjI.js";const x=S("races",()=>{const t=f("$yearInit"),o=f("$yearCrnt"),r=E(),{year:e}=y(r),{updateYear:c}=r,s=m([]),n=m(!1),l=m(null),i=async a=>{if(e.value=a,s.value.length<=0){n.value=!0;try{s.value=await $(a),console.log("RACES STORE: ",s.value)}catch(u){l.value=u.message}finally{n.value=!1}}};return C(e,(a,u)=>{a!==u&&e.value>=t&&e.value<=o&&(s.value=[],i(e.value))}),{year:e,races:s,isLoading:n,err:l,getRaces:i,updateYear:c}}),B={name:"RacesView",components:{SeasonComp:V,RaceCard:k},setup(){const t=x(),{year:o,races:r,isLoading:e}=y(t),{getRaces:c,updateYear:s}=t;return{year:o,races:r,isLoading:e,getRaces:c,updateYear:s}},mounted(){this.getRaces(this.year),console.log("RACES MOUNTED: ",this.races)}},L={class:"q-col-gutter-md row list-unstyled"},N=["id"];function T(t,o,r,e,c,s){const n=g("SeasonComp"),l=g("RaceCard");return p(),d(v,null,[o[0]||(o[0]=_("h1",null,"Races",-1)),R(n,{season:e.year},null,8,["season"]),_("ul",L,[(p(!0),d(v,null,w(e.races,(i,a)=>(p(),d("li",{key:"race_"+a,id:"race_"+a,class:"col-12 col-sm-6 col-lg-4 col-xl-3"},[R(l,{race:i,"has-race-details":!1},null,8,["race"])],8,N))),128))])],64)}const j=h(B,[["render",T]]);export{j as default};
