import{Q as C}from"./QBanner-UlaV9Djd.js";import{d as S,i as _,s as h,r as p,w as k,_ as w,c as u,a as f,b as g,e as x,f as v,F as y,g as B,h as R,T,o as b,j as n}from"./index-DWn2HCBf.js";import{u as V,S as E}from"./SeasonComp-DHhP5ExV.js";import{g as I}from"./data-BWVDeIet.js";import{R as $}from"./RaceCard-D1o-lCqB.js";import"./SeasonHeading-D0sgmWvP.js";import"./QCard-BsQQ47Uz.js";const j=S("races",()=>{const d=_("$yearInit"),s=_("$yearCrnt"),r=V(),{year:e}=h(r),{updateYear:c}=r,a=p([]),t=p(!1),l=p(null),i=async o=>{if(e.value=o,a.value.length<=0){t.value=!0;try{a.value=await I(o),console.log("RACES STORE: ",a.value)}catch(m){l.value=m.message}finally{t.value=!1}}};return k(e,(o,m)=>{o!==m&&e.value>=d&&e.value<=s&&(a.value=[],i(e.value))}),{year:e,races:a,isLoading:t,err:l,getRaces:i,updateYear:c}}),q={name:"RacesView",emits:["updateRouterHistory"],components:{SeasonComp:E,RaceCard:$},setup(d,{emit:s}){const r=j(),{year:e,races:c}=h(r),{getRaces:a,updateYear:t}=r;return b(()=>{a(e.value),s("updateRouterHistory",!1)}),{year:e,races:c,getRaces:a,updateYear:t}}},F={key:0,class:"q-col-gutter-md row list-unstyled"},H=["id"];function L(d,s,r,e,c,a){const t=v("SeasonComp"),l=v("RaceCard");return n(),u(y,null,[s[1]||(s[1]=f("h1",null,"Races",-1)),g(t,{season:e.year},null,8,["season"]),e.races.length>0?(n(),u("ul",F,[(n(!0),u(y,null,B(e.races,(i,o)=>(n(),u("li",{key:"race_"+o,id:"race_"+o,class:"col-12 col-sm-6 col-lg-4 col-xl-3"},[g(l,{race:i,"has-race-details":!1},null,8,["race"])],8,H))),128))])):(n(),x(T,{key:1,appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:R(()=>[g(C,{class:"q-py-md bg-amber-8 text-white",rounded:""},{default:R(()=>[...s[0]||(s[0]=[f("h2",{class:"text-white"},"Warning!",-1),f("p",{class:"no-margin"}," Data is missing or update is in progress. Please check back later. Tnanks! ",-1)])]),_:1})]),_:1}))],64)}const P=w(q,[["render",L]]);export{P as default};
